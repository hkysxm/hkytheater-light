win10关机时，在打开了某些程序的情况下，会显示 “等待程序关闭...”

而等待时间过长的话，关机流程会中断并返回登陆界面，导致需要手动重新操作关机



当然，等待关机的初衷是为了不丢失数据，但是某些程序会强占后台不关闭，这种情况下往往要手动点强制关机。

**解决方法**：

开始 → 运行 → regedit 

定位到 `HKEY_CURRENT_USER\Control Panel\Desktop`

右击 Desktop 文件夹，新建 → 字符串值，修改名称并双击修改数值数据。

有以下三种：

 - **WaitToKillAppTimeout**：等待程序正常自动关闭的时间，数值单位为毫秒（1000 ms = 1 s）

 - **HungAppTimeout**：如果程序未响应，对应的等待时间，数值单位为毫秒（1000 ms = 1 s）

 - **AutoEndTasks**：超时后，是否自动强制关闭，数值单位为 0 或 1，默认为否（0）

我的设置：

> **WaitToKillAppTimeout**：20000

> **HungAppTimeout**：10000

> **AutoEndTasks**：1

设置完成后，发起关机后就可以在 40 s 内自动关闭，应该不会遇到关机失败变成注销的情况了。