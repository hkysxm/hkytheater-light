TIM几个老毛病的解决方法


## 占用高CPU/磁盘问题

### 现象

手上的surface最近用着发现很卡，任务管理器发现TIM连续读写磁盘且占用CPU资源，15W的8250U被划去50%直接吃不消。
使用SpaceSniffer发现占用CPU时C盘一直有频繁文件读写，查找到位置`C:\Users\你的用户名\AppData\Roaming\Tencent\Logs`里的`TIM.tlg`三个文件。家里的台式电脑也有相同情况，不过由于配置较高无感知，但是写进去了3个200MB文件，白白占用了空间。

### 解决方法：
1.关闭TIM，在 `C:\Users（用户）\你的用户名\AppData\Roaming\Tencent\Logs`文件夹 属性-安全中拒绝所有用户的写入权限后将Logs文件夹里的所有文件删除。
![关掉写入权限即可，全关可能导致应用忽然崩溃][1]

2. （未验证）升级到TIM3.0版本，据说修复了该问题。
自动更新似乎无法检测到，需要前往官网<tim.qq.com>下载

3.TIM正在显示动态图片，切换到其他无动态图片的聊天窗口或者直接下拉到没有动态图片的地方即可

## txupd提示UAC

### 现象

开启高等级UAC的用户才会遇到该问题。启动TIM一段时间后会弹出txupd.exe的UAC授权，该文件为自动更新程序，且在AppData和程序安装目录下各有一个。（QQ应该也有个类似的似乎是叫tencentupd.exe?）安全权限禁用或直接删除替换文件都会导致主程序使用片刻后直接报文件损坏。而TIM和QQ都无法关闭自动更新，只能设为检查更新＆不主动安装。

### 解决方法

> 注意：该方案不适用于win10家庭版
任务栏搜索框直接搜索**组策略**或**开始-运行-gpedit.msc**
依次打开**用户配置-管理模板-系统**，找到**不运行指定的Windows应用程序**，将规则设为**已启用**，点击选项窗口的显示添加`txupd.exe`确定保存即可（如下图）。
![添加txupd规则保存][2]


  [1]: https://hky.moe/img/200500.jpg
  [2]: https://hky.moe/img/200501.png